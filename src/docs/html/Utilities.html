<HTML>
<HEAD>
<TITLE>MiG Documentation</TITLE>
<LINK REV="made" HREF="mailto:perl-bugs@sun.com">
</HEAD>

<BODY>

<!-- INDEX BEGIN -->
<!--

<UL>

	<LI><A HREF="#BUNDLED_UTILITIES">BUNDLED UTILITIES</A>
	<LI><A HREF="#mkGallery">mkGallery</A>
	<UL>

		<LI><A HREF="#A_note_about_pixel_sizes">A note about pixel sizes</A>
		<LI><A HREF="#A_note_about_quality_levels">A note about quality levels</A>
		<LI><A HREF="#Labels_prefixes_and_suffixes">Labels, prefixes, and suffixes</A>
		<LI><A HREF="#Using_thumbnail_subdirectories">Using thumbnail subdirectories</A>
		<LI><A HREF="#_Interactive_mode">&quot;Interactive&quot; mode</A>
		<LI><A HREF="#New_only_mode">New-only mode</A>
		<LI><A HREF="#Recursive_mode">Recursive mode</A>
	</UL>

	<LI><A HREF="#jhead">jhead</A>
</UL>
-->
<!-- INDEX END -->

<P>




<P>
<HR>
<H1><A NAME="BUNDLED_UTILITIES">BUNDLED UTILITIES</A></H1>
<P>




<P>
<EM>mkGallery</EM> - Create a gallery from images in the current directory.

<P>
<EM>jhead</EM> - Extracts EXIF header information from JPEG files. (Note that <EM>jhead</EM> is not for direct use - it is called by <EM>mkGallery</EM>
when <EM>mkGallery</EM> is invoked with the <CODE>-e</CODE> flag).

<P>
<EM>convert-metafiles</EM> and <EM>mf_conv.pl</EM> are deprecated - they can be found in the Mig-contrib package in the
download section on the MiG site:

<P>
<PRE>    <A HREF="http://mig.sourceforge.net/">http://mig.sourceforge.net/</A>
</PRE>
<P>
<HR>
<H1><A NAME="mkGallery">mkGallery</A></H1>
<P>




<P>
<EM>mkGallery</EM> can do three things:

<P>
1. Take a directory full of images and create thumbnails for them.

<P>
2. Read EXIF header information from image files and cache it in a text
file for MiG to use.

<P>
3. Create blank comment templates in <EM>mig.cf</EM> files.

<P>
It can do all of them at the same time, too, if you want. You can specify
which <CODE>image(s)</CODE> to work with, or just tell it to process every
image in the current directory.

<P>
<PRE>    Note that mkGallery requires ImageMagick and Perl.  Neither of
    those is required for MiG itself - they are required only if
    you want to use the mkGallery utility.
</PRE>
<P>
<EM>mkGallery</EM> uses the following Perl modules. On my system, using Perl 5.005_03, these
are all included. You probably will not have to install any of them. If you
find any of them are missing, and you are not running with at least Perl
5.005_03 you might want to upgrade your Perl install.

<P>
<PRE>    strict
    Cwd
    <A HREF="File::Basename">File::Basename</A>
    <A HREF="File::Find">File::Find</A>
    Getopt::Std
</PRE>
<P>
<EM>mkGallery</EM> has NOT been tested under Microsoft Windows.

<P>
<PRE>  Usage:
    mkGallery [ -h ] [ -a ] [ -w ] [ -t ] [ -e ] [ -c ] [ -i ]
        [ -s &lt;size&gt; ] [ -q &lt;quality&gt; ] [ -M &lt;type&gt; ] [ -m &lt;label&gt; ]
        [ -n ] [ -r ] [ -d ] [ -D &lt;dir&gt; ] [ -E &lt;ext&gt; ]
        [ &lt;file1&gt; &lt;file2&gt; &lt;...&gt; ]
</PRE>
<P>
<PRE>      -h : Prints this help message.
      -a : Process all image files in current directory.
      -w : Turn over-write on.  By default, files written such
           as the EXIF file will be appended to rather than
           over-written.  Using &quot;-w&quot; indicates the file should
           be over-written instead.
      -t : Generate thumbnail images.
      -e : Build &quot;exif.inf&quot; file.
           See the file docs/Utilities.txt - you must build the jhead
           utility (included) before you can use the -e option.
      -c : Generate blank comments for uncommented images.
      -i : &quot;Interactive&quot; mode for comments (see docs/Utilities.txt).
      -s : Set pixel size for thumbnails.  See the file docs/Utilities.txt.
      -q : Set quality level for thumbnails.  See the file docs/Utilities.txt.
      -M : Define type of &quot;prefix&quot; or &quot;suffix&quot;.
      -m : thumbnail marker label (default &quot;th&quot;).  See the file
           docs/Utilities.txt for more information.
      -n : Only process thumbnails that don't exist (new-only).
           Will also process thumbnails which are older than the
           full-size images they are associated with.
      -r : Recursive mode - process this folder as well as any
           folders and subfolders beneath it.
      -d : Use thumbnail subdirectories (instead of using _th, etc).
           See docs/Utilities.txt for more.
      -D : Name of thumbnail subdirectory to use (default is &quot;thumbs&quot; or
           whatever is in your mig.cfg file).  See docs/Utilities.txt.
      -E : File extension to use for thumbnails.  See docs/Utilities.txt.
</PRE>
<P>
<PRE>    * If creating thumbnails, &quot;convert&quot; must be in your $PATH.
    * This program supports JPEG, PNG and GIF formats.
    * The &quot;-e&quot; feature only supports JPEG files.
      MiG - <A HREF="http://mig.sourceforge.net/">http://mig.sourceforge.net/</A>
</PRE>
<P>
<HR>
<H2><A NAME="A_note_about_pixel_sizes">A note about pixel sizes</A></H2>
<P>
If you specify <CODE>-s 250</CODE> for instance, ImageMagick will be handed a geometry size of <CODE>250x250</CODE>. This means it will create a thumbnail image where the maximum value of
height (or the maximum value of width) is 250 pixels. It will not exceed
that value for either width or height. However, it will maintain the aspect
ratio of your image, so you will not end up with a 250x250 pixel image
(well, not usually).

<P>
Here are some examples I got from testing using the default setting which
is '100'.

<P>
<PRE>  Original size     Thumbnail size
</PRE>
<P>
<PRE>    1280 x 960        100 x  75
     505 x 250        100 x  49
     347 x 202        100 x  58
     160 x 205         78 x 100
</PRE>
<P>
<HR>
<H2><A NAME="A_note_about_quality_levels">A note about quality levels</A></H2>
<P>
Some image formats such as JPEG can have varying quality levels. The
default level is 50 but you can use any number from 1 to 100. The higher
the number, the better the quality of the thumbnail. I have found that 50
is a good number and produces a fairly clear thumbnail from even large
detailed photographs yet still keeping a very good file size (usually below
2.5K).

<P>
You can specify a quality level with <CODE>-q number</CODE>.

<P>
<HR>
<H2><A NAME="Labels_prefixes_and_suffixes">Labels, prefixes, and suffixes</A></H2>
<P>
The <CODE>-M</CODE> and <CODE>-m</CODE> options are new in 0.90. In previous versions, all thumbnails were built
with the pattern <EM>filename_th.ext</EM> so that an image named <EM>myHouse.JPG</EM> would have a thumbnail called <EM>myHouse_th.JPG</EM>.

<P>
That's been changed. You can now use any text you want for the label, not
just <CODE>th</CODE>. So you could have <CODE>mkGallery -m mini</CODE> create thumbnails for you like <EM>myHouse_mini.JPG</EM> and <EM>myGarden_mini.JPG</EM> instead.

<P>
Also, you can use a prefix rather than the default (a suffix). So you could
use <CODE>mkGallery -M prefix</CODE> to create thumbnails like
<EM>th_myHouse.JPG</EM> and <EM>th_myGarden.JPG</EM> instead.

<P>
If you choose to use prefixes and not suffixes, and/or a different label
name, you must make the associated changes to <EM>mig.cfg</EM>. Otherwise MiG will not know what to look for. Changing <EM>mig.cfg</EM> has a side effect, too -
<EM>mkGallery</EM> reads it to set defaults for <CODE>-m</CODE> and <CODE>-M</CODE>, so if your
<EM>mig.cfg</EM> is set to what you want, you shouldn't have to worry about <CODE>-m</CODE>
or <CODE>-M</CODE> when running <EM>mkGallery</EM>.

<P>
Look at <CODE>$markerType</CODE> and <CODE>$markerLabel</CODE> in <EM>mig.cfg.default</EM> or
<EM>mig.cfg</EM>.  <CODE>$markerType</CODE> equates to <CODE>-M</CODE> and <CODE>$markerLabel</CODE> equates to
<CODE>-m</CODE>.

<P>
Values in <EM>mig.cfg</EM> are used, but if you invoke command-line options to
<EM>mkGallery</EM>, <CODE>-m</CODE> and <CODE>-M</CODE> will override the values in <EM>mig.cfg</EM>.

<P>
As of version 1.1, you can also use a thumbnail extension type. This is
basically in case you have mutiple types of images such as JPGs, GIFs, etc,
but you want all thumbnails to be a particular type (say, all GIFs).

<P>
See both the <CODE>$thumbExt</CODE> option in <EM>mig.cfg</EM>, and the <CODE>-E</CODE> option to
<EM>mkGallery</EM>. If you define <CODE>$thumbExt</CODE> in <EM>mig.cfg</EM>, <EM>mkGallery</EM> will use that value as the default.

<P>
(You can also use subdirectories for thumbnails and avoid all this prefix
and suffix nonsense altogether... see the next section).

<P>
<HR>
<H2><A NAME="Using_thumbnail_subdirectories">Using thumbnail subdirectories</A></H2>
<P>
Not all users want their thumbnails littering up their folders. As such,
MiG has an option which lets you put thumbnails into a subdirectory
instead. To do this, set the <CODE>$useThumbSubdir</CODE> and <CODE>$thumbSubdir</CODE>
options in the <EM>mig.cfg</EM> file. You can also use the <CODE>-d</CODE> and <CODE>-D</CODE>
options to <EM>mkGallery</EM> to override what <EM>mig.cfg</EM> has configured.

<P>
Then you might have files like <EM>AUT_1015.JPG</EM>, <EM>AUT_1019.JPG</EM> and in a subdirectory <EM>thumbs/AUT_1015.JPG</EM>, <EM>thumbs/AUT_1019.JPG</EM> ... so they are the same filename for both, just in different directories.
Many people view this as cleaner (I've converted my own gallery over to
this method).

<P>
You don't have to create the directories ahead of time - <EM>mkGallery</EM> will create any directories which are not already there.

<P>
<HR>
<H2><A NAME="_Interactive_mode">&quot;Interactive&quot; mode</A></H2>
<P>
If using the <CODE>-c</CODE> option to generate comment fields in <EM>mig.cf</EM>, you can also optionally specify <CODE>-i</CODE> or Interactive mode. Basically all this will do is prompt you for each
image which does not already have a comment, and you can (optionally) type
in a comment for that image. If you don't want to do so, just hit <CODE>Enter</CODE> and that image will be skipped - <EM>mkGallery</EM>
will move along to the next one in the list.

<P>
<HR>
<H2><A NAME="New_only_mode">New-only mode</A></H2>
<P>
The new-only mode (<CODE>-n</CODE>) basically follows this set of rules.

<P>
1. If an image file exists without a thumbnail associated with it, generate
a thumbnail for it.

<P>
2. If an image file exists, has a thumbnail, but is newer than its
thumbnail file, re-generate the thumbnail.

<P>
If you do not specify <CODE>-n</CODE> then all images will get new thumbnails.

<P>
<HR>
<H2><A NAME="Recursive_mode">Recursive mode</A></H2>
<P>
Recursive mode makes it simpler to do big chunks of an album. You can just
load up a bunch of folders and pass <EM>mkGallery</EM> the <CODE>-r</CODE> flag and it will go to every folder from the point you are currently at,
and do all of the subfolders too. New users can simply go to the <EM>albums</EM> directory and let loose a <CODE>mkGallery -art</CODE> and it will generate thumbnails for everything it finds. Personally I find <CODE>mkGallery -rant</CODE> the most useful combination for general purposes, as well as <CODE>rant</CODE> being easy to remember :-)

<P>
Recursive mode works with all of the action modes (<CODE>-c</CODE>, <CODE>-e</CODE>, <CODE>-t</CODE>).

<P>
<HR>
<H1><A NAME="jhead">jhead</A></H1>
<P>




<P>
<EM>jhead</EM> was written by Matthias Wandel and can be found at:

<P>
<PRE>    <A HREF="http://www.sentex.net/~mwandel/jhead/index.html">http://www.sentex.net/~mwandel/jhead/index.html</A>
</PRE>
<P>
It is included here but I take no credit for the code. Matthias however
deserves lots of credit for it, as it's incredibly useful! Feel free to
drop Matthias a line and let him know his code is appreciated. His email
address is available at the URL listed above.

<P>
You will need to build <EM>jhead</EM> in order to use it. To build on most systems just type <CODE>make</CODE> in the <EM>util/jhead</EM> subdirectory. If you don't have gcc you'll need to edit <EM>Makefile</EM> to point to your compiler.

<P>
This should work as-is on most Unix or Unix-like platforms. I can attest to
its working with Linux.

<P>
<EM>jhead</EM> is not something you need to run directly - it is used by
<EM>mkGallery</EM> if you invoke <EM>mkGallery</EM> with the <CODE>-e</CODE> flag. 

</BODY>

</HTML>
