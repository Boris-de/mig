<HTML>
<HEAD>
<TITLE>MiG Documentation</TITLE>
<LINK REV="made" HREF="mailto:perl-bugs@sun.com">
</HEAD>

<BODY>

<!-- INDEX BEGIN -->
<!--

<UL>

	<LI><A HREF="#The_mig_cf_file">The mig.cf file</A>
	<UL>

		<LI><A HREF="#GENERAL">GENERAL</A>
		<LI><A HREF="#UPGRADING">UPGRADING</A>
		<LI><A HREF="#COMMENT_LINES">COMMENT LINES</A>
		<LI><A HREF="#BULLETINS">BULLETINS</A>
		<LI><A HREF="#IMAGE_COMMENTS">IMAGE COMMENTS</A>
		<LI><A HREF="#HIDDEN_ITEMS">HIDDEN ITEMS</A>
		<LI><A HREF="#SORT_ORDER">SORT ORDER</A>
		<LI><A HREF="#SECURITY">SECURITY</A>
	</UL>

</UL>
-->
<!-- INDEX END -->

<P>




<P>
<HR>
<H1><A NAME="The_mig_cf_file">The mig.cf file</A></H1>
<P>




<P>
<HR>
<H2><A NAME="GENERAL">GENERAL</A></H2>
<P>
This file aims to explain how <EM>mig.cf</EM> works and what it is.

<P>
Each folder under the album subdirectory can optionally have a <EM>mig.cf</EM>
file in it. This file contains things like image comments, a list of hidden
items (if any) and so on.

<P>
The format is borrowed from the config file format of Apache, and is sort
of similar to HTML. Hopefully this means that it will be simple for most
folks to figure out and use.

<P>
An example <EM>mig.cf</EM> could look like this:

<P>
<PRE>    # Beginning of example mig.cf
    #
    &lt;Bulletin&gt;
    We spent four days in Rome.  Even with four whole days to tour
    the area, we found we couldn't cover everything.  The Vatican
    alone took most of the second day, and we only saw half of it.
    &lt;/Bulletin&gt;
</PRE>
<P>
<PRE>    &lt;Comment &quot;AUT_2323.JPG&quot;&gt;
    Massive mosaic found in the Basilica of Saint Peter in the Vatican.
    &lt;/Comment&gt;
</PRE>
<P>
<PRE>    &lt;Comment &quot;AUT_2406.JPG&quot;&gt;
    The Colloseum of Rome.
    &lt;/Comment&gt;
    #
    # End of example mig.cf
</PRE>
<P>
An element is opened by a tag (such as &lt;Bulletin&gt;), and closed by the associated close-tag (the tag with its name preceded
by a slash) as in
&lt;/Bulletin&gt;.

<P>
An element can have an argument, as in &lt;Comment ``AUT_2406.JPG''&gt;.

<P>
These tags MUST be at the beginning of a line.

<P>
If you installed the example gallery, look for <EM>mig.cf</EM> files in there for some useful examples.

<P>
(Below you'll find a table defining valid tags and what they do)

<P>
<HR>
<H2><A NAME="UPGRADING">UPGRADING</A></H2>
<P>
If you are upgrading from 0.83 or earlier to 0.90 or later, you'll need to
update the meta-files. See the script <EM>convert-metafiles</EM> which is on the MiG home page in the contrib section. You'll also need the <EM>mf_conv</EM>
script available from the same location.

<P>
<PRE>    <A HREF="http://tangledhelix.com/software/mig/downloads/contrib">http://tangledhelix.com/software/mig/downloads/contrib</A>
</PRE>
<P>
<HR>
<H2><A NAME="COMMENT_LINES">COMMENT LINES</A></H2>
<P>
Any line starting with <CODE>#</CODE> is a comment line and is ignored by MiG. Blank lines are also ignored. You
should avoid having either one inside any of the element blocks because
they are not ignored inside element blocks such as &lt;Comment&gt;.

<P>
<HR>
<H2><A NAME="BULLETINS">BULLETINS</A></H2>
<P>
<PRE>    &lt;Bulletin&gt;
    [some text]
    &lt;/Bulletin&gt;
</PRE>
<P>
A bulletin is displayed for the current folder. So if you have a bulletin
definition in <EM>albums/Trips/Rome/mig.cf</EM>, then when the browser navigates to Trips, then Rome, they will see not
only the folder view of what is in the folder, they will also see the
bulletin for that folder. It's basically like an image comment, only it is
attached to a folder rather than an image. An example can be found near the
top of this file.

<P>
<HR>
<H2><A NAME="IMAGE_COMMENTS">IMAGE COMMENTS</A></H2>
<P>
<PRE>    &lt;Comment &quot;image_file&quot;&gt;
    [some text]
    &lt;/Comment&gt;
</PRE>
<P>
A comment is attached to an image. When viewing that image, the comment
text associated with it will be displayed in a box below the image. An
example can be found near the top of this file.

<P>
The argument to <CODE>Comment</CODE> must be enclosed in quotes. This is because of things like files with
embedded spaces in the filename, etc.

<P>
As of 0.90, comments are also loaded into the ALT tag of thumbnail images,
so you can hover over an image and view its description. I've had problems
when using hover links that contain HTML elements... so you might want to
keep HTML elements out of your &lt;Comment&gt; structures - especially
&lt;A HREF&gt; tags which don't fit into ALT tags especially well. (You can suppress ALT
tags entirely by setting <CODE>$suppressAltTags</CODE> to <CODE>TRUE</CODE> in
<EM>mig.cfg</EM>).

<P>
<HR>
<H2><A NAME="HIDDEN_ITEMS">HIDDEN ITEMS</A></H2>
<P>
<PRE>    &lt;Hidden&gt;
    [item]
    [item]
    &lt;/Hidden&gt;
</PRE>
<P>
Hidden elements are lists of items which are invisible to the browser.
Sometimes you might want to hide something from the general public, maybe
because you just don't want anyone to view it, or maybe you are working on
it and don't want to let anyone see it until it is finished. Either way you
can do this with the Hidden element. One item per line between the tags, as
in:

<P>
<PRE>    &lt;Hidden&gt;
    New folder
    England
    &lt;/Hidden&gt;
</PRE>
<P>
You should note that Hidden is not considered a security feature. It isn't
very difficult for someone to get into a hidden folder if they know much
about MiG. You should look into your web server's security features such as
password protection if you are looking for real security. MiG also has its
own password protection scheme - see <EM>docs/Passwords.txt</EM>.

<P>
<HR>
<H2><A NAME="SORT_ORDER">SORT ORDER</A></H2>
<P>
<PRE>    &lt;Sort&gt;
    [item]
    [item]
    &lt;/Sort&gt;
</PRE>
<P>
By default, items are sorted by their ASCII value (for the purpose of most
discussions, you can call this alphabetically). However, it can be
desirable to control the order in which items (either images or folders)
appear on your pages. The &lt;Sort&gt; element gives you that control.

<P>
For example, let's say you have a directory which contains this list of
items:

<P>
<PRE>    Ceremony/     Cut the Cake/  Home/         Reception/    Cigars/
    AUT_3706.JPG  AUT_3712.JPG   AUT_3714.JPG  AUT_3716.JPG
    AUT_3707.JPG  AUT_3713.JPG   AUT_3715.JPG  AUT_3717.JPG
</PRE>
<P>
Note that the first five are directories, and the other eight are files.
This will display by default as a list of folders, then a list of images,
each in alphabetical (ASCII) order.

<P>
But let's say you wanted to move <EM>Home</EM> to the top of the list, and
<EM>Cigars</EM> to just above the <EM>Reception</EM> folder.

<P>
To do that, you would create this &lt;Sort&gt; list:

<P>
<PRE>    &lt;Sort&gt;
    Home
    Ceremony
    Cutting the Cake
    Cigars
    Reception
    &lt;/Sort&gt;
</PRE>
<P>
Let's say that you wanted to change the image sort order such that 3716 and
3717 were higher up, say the 3rd &amp; 4th photos. You could do that with:

<P>
<PRE>    &lt;Sort&gt;
    AUT_3706.JPG
    AUT_3707.JPG
    AUT_3716.JPG
    AUT_3717.JPG
    &lt;/Sort&gt;
</PRE>
<P>
But wait a minute! There's another 4 images I didn't even touch! That's OK
- the items you put in a &lt;Sort&gt; show up, in the order you define, at the top of the stack. Anything you
leave out will be sorted independently (alphabetically) and just tacked on
after the pre-sorted items.

<P>
What if you want to sort both folders and images? That's OK, just put two
&lt;Sort&gt; tags in, one for each of them. MiG will figure it out on its own.

<P>
(Those who read over the source will note that you can, if you want, stuff
all sorted items into a single &lt;Sort&gt; element. That's true, but I don't recommend doing it - it tends to get
confusing that way. It's best to just define multiple &lt;Sort&gt; elements and have one for files, one for folders.)

<P>
<HR>
<H2><A NAME="SECURITY">SECURITY</A></H2>
<P>
Some folks feel more comfortable knowing their meta-files such as <EM>mig.cf</EM>
or <EM>exif.inf</EM> can't be viewed raw by a browser. If you are one of those folks, see <EM>docs/Apache.txt</EM> for some tips and tricks including how to protect those files from
visibility. The tips in that file will only work if you're using Apache.

<P>
Another security topic is password protection - see <EM>docs/Passwords.txt</EM>.

</BODY>

</HTML>
