<HTML>
<HEAD>
<TITLE>MiG Documentation</TITLE>
<LINK REV="made" HREF="mailto:perl-bugs@sun.com">
</HEAD>

<BODY>

<!-- INDEX BEGIN -->
<!--

<UL>

	<LI><A HREF="#MiG_A_general_purpose_photo_ga">MiG - A general purpose photo gallery management system.</A>
	<UL>

		<LI><A HREF="#LICENSE_INFORMATION">LICENSE INFORMATION</A>
		<LI><A HREF="#REQUIREMENTS">REQUIREMENTS</A>
		<LI><A HREF="#INSTALLATION_AND_BASICS">INSTALLATION AND BASICS</A>
		<LI><A HREF="#OPTIONAL_CUSTOMIZATION">OPTIONAL CUSTOMIZATION</A>
		<LI><A HREF="#BUG_REPORTING">BUG REPORTING</A>
		<LI><A HREF="#WISH_LIST">WISH LIST</A>
		<LI><A HREF="#EMAIL_LISTS">EMAIL LISTS</A>
	</UL>

</UL>
-->
<!-- INDEX END -->

<P>




<P>
<HR>
<H1><A NAME="MiG_A_general_purpose_photo_ga">MiG - A general purpose photo gallery management system.</A></H1>
<P>




<P>
Copyright (C) 2000-2001 Daniel M. Lowe (<A
HREF="mailto:dan@tangledhelix.com">dan@tangledhelix.com</A>)

<P>
<HR>
<H2><A NAME="LICENSE_INFORMATION">LICENSE INFORMATION</A></H2>
<P>
This program is free software; you can redistribute it and/or modify it
under the terms of the GNU General Public License as published by the Free
Software Foundation; either version 2 of the License, or (at your option)
any later version.

<P>
This program is distributed in the hope that it will be useful, but WITHOUT
ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for
more details.

<P>
You should have received a copy of the GNU General Public License along
with this program; if not, write to the Free Software Foundation, Inc., 59
Temple Place - Suite 330, Boston, MA 02111-1307, USA.

<P>
A copy of the GPL can be found at <A
HREF="http://www.gnu.org/copyleft/gpl.html">http://www.gnu.org/copyleft/gpl.html</A>
or in the file <EM>docs/LICENSE</EM>.

<P>
<HR>
<H2><A NAME="REQUIREMENTS">REQUIREMENTS</A></H2>
<P>
This package requires a web server which supports PHP - <A
HREF="http://www.php.net/">http://www.php.net/</A> . Any recent version of
PHP3 or any version of PHP4 should work. The development platform is
Solaris, so this code tends to assume a Unix-like environment. As such it
may or may not work (and has not been tested) on non-unix-like platforms.

<P>
(Windows users, please see the file <EM>docs/Windows.txt</EM> for more information.)

<P>
(PHP-Nuke users, plase see the file <EM>docs/phpNuke.txt</EM> for more information.)

<P>
The <EM>mkGallery</EM> utility (used to generate thumbnail images) requires Perl - <A
HREF="http://www.perl.org">http://www.perl.org</A> and ImageMagick - <A
HREF="http://www.imagemagick.org/">http://www.imagemagick.org/</A> . You
can use MiG without Perl or ImageMagick - but in that case you may have to
create your own thumbnails and not use <EM>mkGallery</EM>. See the file
<EM>docs/Utilities.txt</EM>. Since thumbnails are optional, you don't even need to generate them if
you don't want to or it's not convenient for you.

<P>
The <EM>jhead</EM> utility which is called by <EM>mkGallery</EM> for EXIF header parsing is a C source code file - you will need to compile
it before using it. See the file <EM>docs/Utilities.txt</EM> for more information. Since
<EM>jhead</EM> is also optional you don't need to worry about this if you don't plan to
extract embedded comment information from your JPEG files.

<P>
<HR>
<H2><A NAME="INSTALLATION_AND_BASICS">INSTALLATION AND BASICS</A></H2>
<P>
Installation is fairly straightforward.

<P>
1. Unpack this archive and enter the resulting directory.

<P>
<PRE>    gzip -dc mig-VERSION.tar.gz | tar xf -
    cd mig-VERSION
</PRE>
<P>
Where ``VERSION'' is the version of that archive (i.e. ``1.1'').

<P>
2. Run the install script <EM>install.sh</EM> and follow the directions.

<P>
<PRE>    ./install.sh
</PRE>
<P>
(Windows users will not be able to use this shell script - see
<EM>docs/Windows.txt</EM> for more information)

<P>
3. Enter the installation directory (which you specified during the
installation).

<P>
<PRE>    cd /usr/apache/htdocs/mig
</PRE>
<P>
4. Review the file <EM>mig.cfg.default</EM>. If you want to make any changes, make them and then copy the file to <EM>mig.cfg</EM>. The reason to do this is simple: future installations / upgrades will
copy over
<EM>mig.cfg.default</EM> with whatever is packaged with that version of MiG. The <EM>mig.cfg</EM> file will never be automatically over-written by the install script.

<P>
<PRE>    vim mig.cfg.default
        [ or if you are a heathen, use some other text editor :-) ]
        [ make desired changes ]
    cp mig.cfg.default mig.cfg
</PRE>
<P>
Or, if you are upgrading, it's a good idea to review <EM>mig.cfg.default</EM> to see if there is anything new that you will want to add to your <EM>mig.cfg</EM>.

<P>
5. Enter the albums directory.

<P>
<PRE>    cd albums
</PRE>
<P>
6. Create any folders and subfolders you want for your own albums, and copy
your images into them.

<P>
<PRE>    mkdir Trips
    mkdir Trips/Alberta,_Canada
    mkdir Trips/Lake_Tahoe,_California
</PRE>
<P>
<PRE>    mkdir House
    mkdir House/Living\ Room
    mkdir House/Dining\ Room
</PRE>
<P>
You can of course, also do this with FTP, scp, or your favorite file
handling method.

<P>
A note about spaces in gallery names: If there is a space embedded in the
directory name, it is left as a space. If there's an underscore (_) in a
directory name, it is displayed to the viewer as a space. So you can use
whichever you like in your galleries and both will appear to be a space as
far as the browser is concerned.

<P>
A note about files: Basically, any PNG, JPG or GIF file will be shown. That
is, any file with an extension of .gif .jpg .jpe .jpeg or .gif. Note that
case is irrelevant so ``.GIF'' is the same as ``.gif'' or ``.Gif''.

<P>
A note about file permissions: MiG makes no attempt to modify or check the
file permissions in your album subdirectory. It is left to you to make sure
the web server has the ability to read these files. On most systems this
means making sure the directories are at least 0755 (which is <CODE>drwxr-xr-x</CODE>) and files are at least 0644 (<CODE>-rw-r--r--</CODE>). However, many people run their systems in such a way that those modes
are considered dangerous to them, and I don't make any assumptions. Please
validate the permissions on your albums to make sure the web server has
access to read them.

<P>
MiG does set file permissions on the files it actually installs (the PHP
files themselves, <EM>mig.cfg.default</EM>, the templates, etc). If these are unsatisfactory to you (they should be
perfectly fine for everyone as far as I can see), please let me know, and
of course you can reset their permissions as you see fit on your system.

<P>
Thumbnails are basically seen by MiG as anything that matches the basic
pattern <CODE>filename_th.EXT</CODE>... so <CODE>myhouse_th.gif</CODE> will be viewed as a thumbnail. The basic rule of thumb is, try not to use
the string <CODE>_th</CODE>
in your filenames.

<P>
<PRE>    Note, as of 0.90 this behavior changed.  This is still true of the
    default settings, but you now have the ability to control the format
    of thumbnail filenames.  See docs/Utilities.txt and mig.cfg.default.
</PRE>
<P>
You can use spaces (or, as above, underscores) in filenames just like you
can do with directory names. Underscores in filenames will be shown as-is
though, they are not re-mapped to be displayed as a space.

<P>
Also, thumbnails can live in a subdirectory rather than in the main folder
- see below under ``Optional Customization''.

<P>
7. You probably want to create thumbnails. You can use the <EM>mkGallery</EM>
script found in the <EM>util</EM> subdirectory. Note that it requires Perl and the ImageMagick suite (see the
file <EM>docs/Utilities.txt</EM>).

<P>
You don't have to use <EM>mkGallery</EM> - you can make your own thumbnails if you want. Just have the filenames
match the pattern shown above. So...

<P>
<PRE>     myHouse.jpg        = myHouse_th.jpg
     Livingroom.JPG     = Livingroom_th.JPG
</PRE>
<P>
Case does matter for the <CODE>_th</CODE> - it must be lowercase!

<P>
To create thumbnails, in a nutshell:

<P>
<PRE>    cd /usr/local/apache/htdocs/gallery/Trips/Lake_Tahoe,_California
    ../../util/mkGallery -a -t
</PRE>
<P>
See the file <EM>docs/Utilities.txt</EM> for more about <EM>mkGallery</EM>. You can get a listing of available options by invoking <EM>mkGallery</EM> with the <CODE>-h</CODE> flag.

<P>
The author finds <CODE>mkGallery -rant</CODE> to be the most useful mode for general purposes. Again, see <EM>docs/Utilities.txt</EM> for more information.

<P>
<PRE>    Note that not all thumbnails have to use _th as their &quot;unique&quot; part
    anymore.  See docs/Utilities.txt.  You can make them anything you
    want, and can even &quot;prefix&quot; them to the filename instead of suffixing
    them.
</PRE>
<P>
For <EM>mkGallery</EM> to create thumbnails, <EM>convert</EM> from the ImageMagick suite must be in your <CODE>$PATH</CODE>.

<P>
If you elect not to use thumbnails, a generic image icon will be used in
place of a thumbnail image, so creating thumbnails is not mandatory (it
just makes for a nicer presentation for people viewing your album).

<P>
<EM>mkGallery</EM> will only bother with the PNG, GIF or JPEG files it finds in the current
directory (.gif .jpg .jpe .jpeg and .png).

<P>
As of version 1.1, you can use a thumbnail subdirectory rather than having
your thumbnails co-exist in the same folder with the images they represent.
See below under ``Optional customization'' for more info.

<P>
As of version 1.1, you can use a global thumbnail extension for all
thumbnails. For example if you want all thumbnails to be GIFs even if the
real images they represent are something other than GIF, you can do this.
See the <CODE>-E</CODE> option to <EM>mkGallery</EM>, and the
<CODE>$thumbExt</CODE> option in <EM>mig.cfg</EM>. Also see <EM>docs/Utilities.txt</EM>.

<P>
8. Go to <A
HREF="http://www.yourserver.com/mig/">http://www.yourserver.com/mig/</A>
(or wherever you happened to install it) to view your gallery with your web
browser.

<P>
You may have to tell your web server that <EM>index.php</EM> (or <EM>index.php3</EM>) is a valid default page. Apache users may need to add the filename to the <CODE>DirectoryIndex</CODE> directive (adding to the end of the line in your <EM>httpd.conf</EM> and running <CODE>apachectl graceful</CODE> as root is probably the way to do that). Other changes to Apache might be
required to support PHP. How to get PHP to work in general is left as an
exercise to the reader, but <A
HREF="http://www.php.net/">http://www.php.net/</A> and <A
HREF="http://www.apache.org/">http://www.apache.org/</A> should have the
necessary information.

<P>
<HR>
<H2><A NAME="OPTIONAL_CUSTOMIZATION">OPTIONAL CUSTOMIZATION</A></H2>
<P>
1. HTML templates (and colors)

<P>
You may optionally edit the HTML templates found in the <EM>templates</EM>
subdirectory. See the file <EM>docs/Templates.txt</EM> for more information.

<P>
2. Hidden folders and hidden files

<P>
If you have some reason to hide particular files or folders from general
view (i.e. it can be viewed but only with an exact URL, you don't want
people wandering in there from the general public) you can list those items
in a file called <EM>mig.cf</EM> in the relevant folder. As an example, look at <EM>albums/Example_Gallery/mig.cf</EM> (if you installed the Example Gallery).

<P>
To add hidden items, just add a &lt;Hidden&gt; element, like this:

<P>
<PRE>    &lt;Hidden&gt;
    hidden_folder
    another_hidden_folder
    &lt;/Hidden&gt;
</PRE>
<P>
Users of Apache will find this configuration format pretty familiar. Tag
elements like &lt;Hidden&gt; must be at the beginning of a line!

<P>
See the file <EM>docs/mig_cf.txt</EM> for information about the format of
<EM>mig.cf</EM>.

<P>
(Note for users upgrading from MiG 0.83 or earlier - the format has
changed, as you'd have noticed already. If you need to convert to the new
format, use the <EM>convert-metafiles</EM> script which is in the contrib section on the MiG home page).

<P>
Note that Hidden is not considered secure. If you need to make sure your
gallery is secure, please take advantage of the password protection in your
web server (if it has such a feature). You can also take advantage of MiG's
built in password features (see <EM>docs/Passwords.txt</EM>). MiG's password protection isn't exactly secure either, but it's somewhat
better than the Hidden mode.

<P>
3. Comments

<P>
You can optionally add comments for any image you wish. You don't have to
add comments at all. The comments are stored in <EM>mig.cf</EM> in the same directory as the image in question.

<P>
Comments are shown in a box below the image in image views. In thumbnail
views, they are shown as the ALT tag text. (You can suppress ALT tags by
setting <CODE>$suppressAltTags</CODE> to <CODE>TRUE</CODE> in <EM>mig.cfg</EM>).

<P>
As an example, let's say you had files <EM>house.jpg</EM>, <EM>car.gif</EM> and
<EM>dog.jpg</EM>. Let's say you wanted a comment on the house and the dog, but nothing in
particular to say about the car. You would add markup like this to <EM>mig.cf</EM>:

<P>
<PRE>    &lt;Comment &quot;house.jpg&quot;&gt;
    This is my house, which I bought in the fall of 1998.
    &lt;/Comment&gt;
</PRE>
<P>
<PRE>    &lt;Comment &quot;dog.jpg&quot;&gt;
    This is the dog we had when I was growing up.  She was a lot of
    fun!  Sadly, she died when I was 12 years old (she had cancer).
    We had other dogs afterward, but none of them were as much fun.
    &lt;/Comment&gt;
</PRE>
<P>
(If you want to save yourself some typing you can use the <CODE>-c</CODE>
option to <EM>util/mkGallery</EM> to create a blank comments template. You can also use the <CODE>-i</CODE> option to enter comments interactively. See
<EM>docs/Utilities.txt</EM> for more information.)

<P>
You can have as many lines as you want for the description. The key is that
the description must be enclosed inside the
&lt;Comment&gt;...&lt;/Comment&gt; structure. The tags such as
&lt;Comment&gt; and &lt;/Comment&gt; MUST be at the start of a new line. There are examples in <EM>albums/Example_Gallery/mig.cf</EM> (if you installed the example gallery).

<P>
See the file <EM>docs/mig_cf.txt</EM> for information about the format of
<EM>mig.cf</EM>.

<P>
(Note for users upgrading from MiG 0.83 or earlier - the format has
changed, as you'd have noticed already. The install script probably already
updated your metafiles such as <EM>.comments.txt</EM> but if not, you can do so by hand by running <EM>convert-metafiles</EM> which is in the contrib directory on the MiG homepage).

<P>
4. EXIF header information

<P>
You can build EXIF comment files (<EM>exif.inf</EM>) using <EM>mkGallery</EM> and the
<CODE>-e</CODE> option. See the file <EM>docs/Utilities.txt</EM>. Note that you must compile the (included) <EM>jhead</EM> utility from Matthias Wandel before the
<CODE>-e</CODE> option will function. Compiling <EM>jhead</EM> is probably as easy as this on a typical Unix or Linux system:

<P>
<PRE>    cd util/jhead ; make clean ; make
</PRE>
<P>
Since only JPEG files support EXIF headers, <EM>mkGallery</EM> will only look at JPEG files when building the EXIF files. Much more than
the comments themselves are stored in these <EM>exif.inf</EM> files, and future versions of MiG may parse more information from these
files than it currently does. Right now all MiG knows how to extract from
the
<EM>exif.inf</EM> file is embedded comments.

<P>
(Note for users upgrading from MiG 0.83 or earlier - the filename has
changed, as you'd have noticed already. The install script probably already
updated your metafiles such as <EM>.exif_comments.txt</EM> but if not, you can do so by hand by running <EM>convert-metafiles</EM> which is in the contrib directory on the MiG home page. The only change for
EXIF files is the filename, just rename to <EM>exif.inf</EM>).

<P>
5. Style sheets

<P>
You can modify the file <EM>templates/style.css</EM> if you want to change the
<CODE>text/css</CODE> style (which is what determines link coloring). If you don't want to use
the <EM>style.css</EM> file, remove the <CODE>#include</CODE> directive from the HTML templates which includes it in the template. For
more information see <EM>docs/Templates.txt</EM>.

<P>
6. Item sorting

<P>
You can define your own sort order (rather than relying on alphabetical
sorting) - see <EM>docs/mig_cf.txt</EM>.

<P>
7. Symlinks

<P>
You can create virtual collections and cross-linking among your albums by
simply using symbolic links. For instance you can do stuff like:

<P>
<PRE>    cd albums
    mkdir People ; cd People
    mkdir Katie ; cd Katie
    ln -s ../../Birthdays/Katie_2000 .
</PRE>
<P>
And you end up with the ``Birthdays : Katie 2000'' folder as a virtual
folder under the ``People : Katie'' folder. In this way you can have a
folder in more than one place at the same time without having a need for
more than one copy of the photo on the disk.

<P>
I have only tested that under Apache with PHP3. And of course it probably
won't work in Windows because as far as I know, FAT32 and NTFS do not
support symbolic links in the first place. I do not know if Windows
shortcuts (.LNK files) will work instead.

<P>
8. Thumbnail image information

<P>
Some people may not like to have the ``540KB, 640x480'' type stuff to be
displayed below each thumbnail. If you don't want it there, see the <CODE>$suppressImageInfo</CODE> option in <EM>mig.cfg.default</EM>. Setting that to
<CODE>TRUE</CODE> has the effect of showing thumbnails as images only - no other information
is shown about each image.

<P>
9. For Apache users only

<P>
If you are using the popular Apache web server, see <EM>docs/Apache.txt</EM>
for some useful Apache-specific tips and tricks.

<P>
10. Password protected folders

<P>
MiG can password-protect folders, or collections of folders. See
<EM>docs/Passwords.txt</EM> for more information. Note that MiG's password protection isn't absolutely
secure, so don't use it if you require really tight security on your
images.

<P>
11. Thumbnail subdirectories

<P>
Some users don't like having their thumbnails littering up their folders
alongside their images. For those users, the <CODE>$useThumbSubdir</CODE>
option exists.

<P>
Basically to use this, one would create a subdirectory in each folder
(perhaps called <EM>thumbs</EM>). Thumbnails in that subdirectory would have the exact same name as their
full-size counterparts in the main folder. This is different than the old
behavior where you were forced to use two different filenames.

<P>
See <EM>docs/Utilities.txt</EM> for information about this option and
<EM>mkGallery</EM>. Also see <EM>mig.cfg.default</EM> for the <CODE>$useThumbSubdir</CODE> and
<CODE>$thumbSubdir</CODE> parameters. By default, thumbnail subdirectories are not used (for
historical reasons).

<P>
12. Thumbnail suppression

<P>
Some people don't want to have thumbnails whatsoever. For those people the
<CODE>$noThumbs</CODE> switch exists in the <EM>mig.cfg</EM> file. Setting <CODE>$noThumbs</CODE> to
<CODE>TRUE</CODE> has the effect of not using thumbnail images at all in your albums.
<CODE>$noThumbs</CODE> is set to <CODE>FALSE</CODE> by default.

<P>
13. Forcing a thumbnail type

<P>
Some people expressed a desire to have all thumbnails be a certain type no
matter what their normal images were. For example, main images might be JPG
or GIF but all thumbnails would be GIF, regardless.

<P>
By default, if an image is a JPG, MiG will also look for a JPG thumbnail. A
GIF image will have a GIF thumbnail.

<P>
If you wish to use all the same type for thumbnails even if the real image
is a different type (or varying types), set the value of <CODE>$thumbExt</CODE> in <EM>mig.cfg</EM> to the extension you are using. Note that case does matter, so setting it
to <CODE>gif</CODE> and uploading <EM>foo.GIF</EM>
will result in an error!

<P>
14. Languages other than English

<P>
MiG has support for other languages - however, it only supports those
languages someone has supplied translations for. As I write this, that
means English and French. If you want to translate it to another language,
please get in touch with me and I'll be glad to add your translations to
the available list of languages.

<P>
(see <EM>mig.cfg.default</EM> for more information - MiG now supports English, French, German, Norwegian,
Portugese, Finnish, Romanian, Russian Windows-1251, Russian KOI8-R and
Turkish)

<P>
<HR>
<H2><A NAME="BUG_REPORTING">BUG REPORTING</A></H2>
<P>
You can report bugs in one of two ways. The first way is to submit a bug
report on the MiG project page at

<P>
<PRE>    <A HREF="http://sourceforge.net/projects/mig/">http://sourceforge.net/projects/mig/</A>
</PRE>
<P>
The second is to send an email to <A
HREF="mailto:mig-bugs@tangledhelix.com">mig-bugs@tangledhelix.com</A>

<P>
<HR>
<H2><A NAME="WISH_LIST">WISH LIST</A></H2>
<P>
You can submit items to the wish list in one of two ways. The first way is
to submit a Feature Request on the MiG project page at

<P>
<PRE>    <A HREF="http://sourceforge.net/projects/mig/">http://sourceforge.net/projects/mig/</A>
</PRE>
<P>
The second is to send an email to <A
HREF="mailto:mig-wishlist@tangledhelix.com">mig-wishlist@tangledhelix.com</A>


<P>
<HR>
<H2><A NAME="EMAIL_LISTS">EMAIL LISTS</A></H2>
<P>
There are two mailing lists related to MiG. Visit the URLs below if you
wish to subscribe. Both lists are currently fairly low-traffic.

<P>
mig-announce is an announcements-only list. New versions and so forth are
announced on this list.

<P>
<PRE>    <A HREF="http://lists.sourceforge.net/lists/listinfo/mig-announce">http://lists.sourceforge.net/lists/listinfo/mig-announce</A>
</PRE>
<P>
mig-users is a general discussion list. Any mig-related topic can be
discussed on this list. Note also that I typically send announcements here,
so if you subscribe to mig-users you don't necessarily have to subscribe to
mig-announce as well (but you can if you want to).

<P>
<PRE>    <A HREF="http://lists.sourceforge.net/lists/listinfo/mig-users">http://lists.sourceforge.net/lists/listinfo/mig-users</A>
</PRE>
</BODY>

</HTML>
